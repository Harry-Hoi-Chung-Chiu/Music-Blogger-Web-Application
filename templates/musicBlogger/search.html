{% extends 'musicBlogger/base.html' %}
{% load static %}

{% block title_block %}
    <title>Search Results</title>
{% endblock %}


{% block head_block %}
<script src="{% static 'javascript/search.js' %}"></script>
<script src="{% static 'javascript/like.js' %}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<link rel="stylesheet" href="{% static 'css/search.css' %}">
{% endblock %}

{% block body_block %}
    <h1>Search</h1>
    <input type="text" id="search-input" placeholder="Search...">
    <button onclick="search()">Search</button>
    <div id="results">
        <div id="results_songs">
            <h2>Song Results</h2>
            {% for result in results_songs %}
                <div class="song">
                    <h3><a href="{{ result.youtubeURL }}">{{ result.name }}</a></h3>
                    {% if result.image %}
                    <a href="{{ result.youtubeURL }}"><img src="{{ result.image.url }}"></a>
                    {% endif %}
                    <p>{{ result.text }}</p>
                    {% if user.is_authenticated %}
                        {% if result in likedSongs %}
                            <button onclick="like('{{ user.username }}', '{{ result.id }}')", id="like-{{ result.id }}">Liked</button>
                        {% else %}
                            <button onclick="like('{{ user.username }}', '{{ result.id }}')", id="like-{{ result.id }}">Like</button>
                        {% endif %}
                    {% endif %}
                </div>
            {% empty %}
                No results found.
            {% endfor %}
          </div>
    
        
            <div id="results_profiles">
                <h2>Profile Results</h2>
                {% for result in results_profiles %}
                <div class="profile">
                    <h3><a href="{% url 'musicBlogger:profile' username=result.user %}">{{ result.user }}</a></h3>
                    {% if result.image %}
                        <a href="{% url 'musicBlogger:profile' username=result.user %}"><img src="{{ result.image.url }}"></a>
                    {% endif %}
                    <p>{{ result.text }}</p>
                </div>
                {% empty %}
                    No results found.
                {% endfor %}
    
        </div>
        
            
            <div id="results_blogs">
                <h2>Blogs Results</h2>
                {% for result in results_blogs %}
                    <div class="blogs">
                        <h3><a href="{% url 'musicBlogger:blog' slug=result.slug %}">{{ result.title }}</a></h3>
                        {% if result.image %}
                            <a href="{% url 'musicBlogger:blog' slug=result.slug %}"><img src="{{ result.image.url }}"></a>
                        {% endif %}
                        <p>{{ result.text }}</p>
                    </div>
                {% empty %}
                    No results found.
                {% endfor %}
            </div>
    
  </div>
{% endblock %}
